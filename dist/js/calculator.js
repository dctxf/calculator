!function(e,a){"use strict";var u={zero:function(e){return e.value=0},add:function(e,a){return 0===a.length?(a.push(Number(e.value)),e.value=a[0],a):1===a.length?(a.push(Number(e.value)),e.value=a[0]+a[1],a):(a[0]=a[0]+a[1],a[1]=Number(e.value),e.value=a[0]+a[1],a)},subtraction:function(e,a){return 0===a.length?(a.push(Number(e.value)),e.value=a[0],a):1===a.length?(a.push(Number(e.value)),e.value=a[0]-a[1],a):(a[0]=a[0]-a[1],a[1]=Number(e.value),e.value=a[0]-a[1],a)},multiplication:function(e,a){return 0===a.length?(a.push(Number(e.value)),e.value=a[0],a):1===a.length?(a.push(Number(e.value)),e.value=a[0]*a[1],a):(a[0]=a[0]*a[1],a[1]=Number(e.value),e.value=a[0]*a[1],a)},division:function(e,a){return 0===a.length?(a.push(Number(e.value)),e.value=a[0],a):1===a.length?(a.push(Number(e.value)),e.value=a[0]/a[1],a):(a[0]=a[0]/a[1],a[1]=Number(e.value),e.value=a[0]/a[1],a)},square:function(e,a){return a[0]=Number(e.value)*Number(e.value),e.value=a[0],a},isNot:function(e,a){return a[0]=-Number(e.value),e.value=a[0],a},prescribing:function(e,a){return a[0]=Math.sqrt(Number(e.value)),e.value=a[0],a},percentage:function(e,a){return a[0]=.01*Number(e.value),e.value=a[0],a},backspace:function(e){if("number"==typeof e.value){var a=String(e.value).length;return e.value=String(e.value),1===a&&"0"!==e.value?e.value="0":"0"===e.value||0===e.value?e.value="0":e.value=e.value.substr(0,a-1)}if("string"==typeof e.value){var a=e.value.length;return 1===a&&"0"!==e.value?e.value="0":"0"===e.value||0===e.value?e.value="0":e.value=e.value.substr(0,a-1)}}};e.calculator=u}(window,document),window.onload=function(){"use strict";var e=[],a=!1,u=function(){for(var e=document.getElementById("btns").getElementsByTagName("li"),a=e.length,u=0;a>u;u++)!function(a){e[a].onclick=function(){l(this)}}(u)},l=function(u){var l=u.innerText,c=document.getElementById("result");switch(l){case"C":console.log("归零"),calculator.zero(c,e),e=[];break;case"+/-":console.log("取反"),calculator.isNot(c,c.value);case"%":console.log("百分转换"),calculator.percentage(c,c.value);break;case"backspace":console.log("退格"),calculator.backspace(c);break;case"1":r(c,"1");break;case"2":r(c,"2");break;case"3":r(c,"3");break;case"4":r(c,"4");break;case"5":r(c,"5");break;case"6":r(c,"6");break;case"7":r(c,"7");break;case"8":r(c,"8");break;case"9":r(c,"9");break;case"0":r(c,"0");break;case".":r(c,".");break;case"+":calculator.add(c,e),a=!0;break;case"-":calculator.subtraction(c,e),a=!0;break;case"*":calculator.multiplication(c,e),a=!0;break;case"÷":calculator.division(c,e),a=!0;break;case"×²":calculator.square(c,e),a=!0;break;case"+/-":calculator.isNot(c,e),a=!0;break;case"√":calculator.prescribing(c,e),a=!0;break;case"%":calculator.percentage(c,e),a=!0}},r=function(e,u){a?("0"===e.value&&"."!==u?e.value=u:e.value.indexOf(".")>=0&&"."===u?e.value=e.value:e.value=u,a=!1):"0"===e.value&&"."!==u?e.value=u:e.value.indexOf(".")>=0&&"."===u?e.value=e.value:e.value+=u};u()};